{"version":3,"file":"tag-list.component.js","sourceRoot":"","sources":["../../../../../../.ng_build/theme/components/tag/tag-list.component.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  AfterContentInit,\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  ContentChildren,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n  QueryList,\n  Renderer2,\n} from '@angular/core';\nimport { merge, Subject } from 'rxjs';\nimport { filter, finalize, map, startWith, switchMap, takeUntil } from 'rxjs/operators';\n\nimport { NbLayoutDirection, NbLayoutDirectionService } from '../../services/direction.service';\nimport { NbStatusService } from '../../services/status.service';\nimport { NbFocusMonitor } from '../cdk/a11y/a11y.module';\nimport {\n  NbActiveDescendantKeyManager,\n  NbActiveDescendantKeyManagerFactoryService,\n} from '../cdk/a11y/descendant-key-manager';\nimport { BACKSPACE, DELETE, SPACE } from '../cdk/keycodes/keycodes';\nimport { convertToBoolProperty, NbBooleanInput } from '../helpers';\nimport { NbComponentSize } from '../component-size';\nimport { NbAutocompleteDirective } from '../autocomplete/autocomplete.directive';\nimport { NbTagComponent } from './tag.component';\nimport { NbTagInputDirective } from './tag-input.directive';\n\n/**\n *\n * `nb-tag-list` component displays a list of `nb-tag` components.\n *\n * @stacked-example(Tag List Showcase, tag/tag-showcase.component)\n *\n * @styles\n *\n * tag-list-tiny-tag-offset:\n * tag-list-small-tag-offset:\n * tag-list-medium-tag-offset:\n * tag-list-large-tag-offset:\n * tag-list-giant-tag-offset:\n * tag-list-with-input-tiny-padding:\n * tag-list-with-input-small-padding:\n * tag-list-with-input-medium-padding:\n * tag-list-with-input-large-padding:\n * tag-list-with-input-giant-padding:\n * tag-list-with-input-rectangle-border-radius:\n * tag-list-with-input-semi-round-border-radius:\n * tag-list-with-input-round-border-radius:\n */\n@Component({\n  selector: 'nb-tag-list',\n  template: `\n    <div class=\"nb-tag-list-tags-wrapper\">\n      <ng-content select=\"nb-tag, input[nbTagInput]\"></ng-content>\n    </div>\n  `,\n  exportAs: 'nbTagList',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NbTagListComponent implements OnInit, AfterContentInit, AfterViewInit, OnDestroy {\n\n  protected readonly destroy$: Subject<void> = new Subject<void>();\n  protected readonly keyDown$: Subject<KeyboardEvent> = new Subject<KeyboardEvent>();\n  protected readonly tagClick$: Subject<NbTagComponent> = new Subject<NbTagComponent>();\n  protected focused: boolean = false;\n  protected keyManager: NbActiveDescendantKeyManager<NbTagComponent>;\n\n  @ContentChildren(NbTagComponent) tags: QueryList<NbTagComponent>;\n  @ContentChild(NbTagInputDirective) tagInput: NbTagInputDirective;\n  @ContentChild(NbAutocompleteDirective) autocompleteDirective: NbAutocompleteDirective<any>;\n\n  /**\n   * Controls tags offset.\n   */\n  @Input()\n  size: NbComponentSize = 'medium';\n\n  @Input()\n  @HostBinding('attr.tabindex')\n  tabIndex: number = 0;\n\n  @Input()\n  @HostBinding('attr.role')\n  role: string = 'listbox';\n\n  @Input()\n  @HostBinding('attr.aria-multiselectable')\n  get multiple(): boolean {\n    return this._multiple;\n  }\n  set multiple(value: boolean) {\n    this._multiple = convertToBoolProperty(value);\n  }\n  protected _multiple: boolean = false;\n  static ngAcceptInputType_multiple: NbBooleanInput;\n\n  @HostBinding('attr.aria-activedescendant')\n  activeTagId: string | null = null;\n\n  /**\n   * Emits when tag need to be removed (whether because of click on the remove button\n   * or when `delete` or `backspace` key pressed).\n   */\n  @Output() readonly tagRemove: EventEmitter<NbTagComponent> = new EventEmitter<NbTagComponent>();\n\n  @HostBinding('class.nb-tag-list-with-input')\n  get _hasInput(): boolean {\n    return !!this.tagInput;\n  }\n\n  @HostBinding('class.focus')\n  get _isFocused(): boolean {\n    return this.focused;\n  }\n\n  @HostBinding('class.input-full-width')\n  get _isFullWidth(): boolean {\n    return !!this.tagInput?.fullWidth;\n  }\n\n  @HostBinding('class')\n  get _inputClasses(): string[] {\n    if (this._hasInput) {\n      return [\n        `shape-${this.tagInput.shape}`,\n        `size-${this.tagInput.fieldSize}`,\n        this.statusService.getStatusClass(this.tagInput.status),\n      ];\n    }\n\n    return [`size-${this.size}`];\n  }\n\n  @HostListener('keydown', ['$event'])\n  _onKeydown(event: KeyboardEvent): void {\n    this.keyDown$.next(event);\n  }\n\n  @HostListener('click', ['$event'])\n  _onClick({ target }: MouseEvent): void {\n    const clickedTag = this.tags.find((tag: NbTagComponent) => tag._hostElement.nativeElement === target);\n    if (clickedTag) {\n      this.tagClick$.next(clickedTag);\n    }\n  }\n\n  constructor(\n    protected hostElement: ElementRef<HTMLElement>,\n    protected cd: ChangeDetectorRef,\n    protected renderer: Renderer2,\n    protected zone: NgZone,\n    protected focusMonitor: NbFocusMonitor,\n    protected activeDescendantKeyManagerFactory: NbActiveDescendantKeyManagerFactoryService<NbTagComponent>,\n    protected directionService: NbLayoutDirectionService,\n    protected statusService: NbStatusService,\n  ) {}\n\n  ngOnInit() {\n    this.focusMonitor.monitor(this.hostElement, true)\n      .pipe(\n        map(origin => !!origin),\n        finalize(() => this.focusMonitor.stopMonitoring(this.hostElement)),\n        takeUntil(this.destroy$),\n      )\n      .subscribe((isFocused: boolean) => this.onFocusChange(isFocused));\n  }\n\n  ngAfterContentInit() {\n    this.initKeyManager();\n    this.setAutocompleteCustomHost();\n  }\n\n  ngAfterViewInit() {\n    this.listenToLayoutDirectionChange();\n    this.listenListKeyDown();\n    this.listenInputKeyDown();\n    this.listenTagClick();\n    this.listenTagRemove();\n    this.listenTagDestroy();\n    this.listenActiveTagChange();\n    this.listenNoTags();\n\n    // TODO: #2254\n    this.zone.runOutsideAngular(() => setTimeout(() => {\n      this.renderer.addClass(this.hostElement.nativeElement, 'nb-transition');\n    }));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n  }\n\n  protected initKeyManager(): void {\n    this.keyManager = this.activeDescendantKeyManagerFactory\n      .create(this.tags)\n      .withHorizontalOrientation(this.directionService.getDirection())\n      .withWrap();\n  }\n\n  protected listenToLayoutDirectionChange(): void {\n    this.directionService.onDirectionChange()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((direction: NbLayoutDirection) => this.keyManager.withHorizontalOrientation(direction));\n  }\n\n  protected listenListKeyDown(): void {\n    const tagListKeyDown$ = this.keyDown$\n      .pipe(filter(({ target }: KeyboardEvent) => target === this.hostElement.nativeElement));\n    const activeTagKeyDown$ = tagListKeyDown$\n      .pipe(filter(() => !!this.keyManager.activeItem));\n\n    tagListKeyDown$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((event: KeyboardEvent) => this.keyManager.onKeydown(event));\n\n    activeTagKeyDown$\n      .pipe(\n        filter(({ keyCode }: KeyboardEvent) => keyCode === SPACE),\n        takeUntil(this.destroy$),\n      )\n      .subscribe((event: KeyboardEvent) => {\n        this.toggleTag(this.keyManager.activeItem);\n        // Prevents page scroll.\n        event.preventDefault();\n      });\n\n    activeTagKeyDown$\n      .pipe(\n        filter(({ keyCode }: KeyboardEvent) => this.isBackspaceOrDelete(keyCode)),\n        map(() => this.keyManager.activeItem),\n        takeUntil(this.destroy$),\n      )\n      .subscribe((tagToRemove: NbTagComponent) => tagToRemove._remove());\n  }\n\n  protected listenInputKeyDown(): void {\n    const inputKeyDown$ = this.keyDown$\n      .pipe(filter(({ target }: KeyboardEvent) => target === this.tagInput?._hostElement.nativeElement));\n\n    inputKeyDown$\n      .pipe(\n        filter(({ keyCode }: KeyboardEvent) => {\n          return this.tagInput._value === '' && this.isBackspaceOrDelete(keyCode) && this.tags.length > 0;\n        }),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(() => {\n        this.hostElement.nativeElement.focus();\n        this.keyManager.setLastItemActive();\n        this.cd.markForCheck();\n      });\n  }\n\n  protected listenTagClick(): void {\n    this.tagClick$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((clickedTag: NbTagComponent) => {\n        this.toggleTag(clickedTag);\n        this.keyManager.setActiveItem(clickedTag);\n      });\n  }\n\n  protected listenTagRemove(): void {\n    this.tags.changes\n      .pipe(\n        startWith(this.tags),\n        switchMap((tags: QueryList<NbTagComponent>) => merge(...tags.map((tag: NbTagComponent) => tag.remove))),\n        takeUntil(this.destroy$),\n      )\n      .subscribe((tagToRemove: NbTagComponent) => this.tagRemove.emit(tagToRemove));\n  }\n\n  protected listenTagDestroy(): void {\n    this.tags.changes\n      .pipe(\n        startWith(this.tags),\n        switchMap((tags: QueryList<NbTagComponent>) => merge(...tags.map((tag: NbTagComponent) => tag.destroy$))),\n        filter((destroyedTag: NbTagComponent) => destroyedTag === this.keyManager.activeItem),\n        map((destroyedTag: NbTagComponent) => destroyedTag === this.tags.last),\n        takeUntil(this.destroy$),\n      )\n      .subscribe((isLastTagDestroyed: boolean) => {\n        if (isLastTagDestroyed) {\n          this.keyManager.setPreviousItemActive();\n        } else {\n          this.keyManager.setNextItemActive();\n        }\n      });\n  }\n\n  protected listenNoTags(): void {\n    this.tags.changes\n      .pipe(\n        startWith(this.tags),\n        filter((tags: QueryList<NbTagComponent>) => tags.length === 0),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(() => this.focusInputIfActive());\n  }\n\n  protected listenActiveTagChange(): void {\n    this.keyManager.change\n      .pipe(\n        map(() => this.keyManager.activeItem?._id),\n        takeUntil(this.destroy$),\n      )\n      .subscribe((activeTagId: string | null) => {\n        this.activeTagId = activeTagId;\n        this.cd.markForCheck();\n      });\n  }\n\n  protected onFocusChange(isFocused: boolean): void {\n    this.focused = isFocused;\n    this.cd.markForCheck();\n\n    if (!isFocused || this.tagInput?.focused$.value) {\n      this.keyManager.setActiveItem(-1);\n      return;\n    }\n\n    // Focus input when focusing tag list without tags. Otherwise select first tag.\n    if (this.tags.length === 0 && this._hasInput) {\n      this.focusInput();\n    } else {\n      this.keyManager.setFirstItemActive();\n    }\n  }\n\n  protected isBackspaceOrDelete(keyCode: number): boolean {\n    return keyCode === BACKSPACE || keyCode === DELETE;\n  }\n\n  protected setAutocompleteCustomHost(): void {\n    if (this.autocompleteDirective) {\n      this.autocompleteDirective.customOverlayHost = this.hostElement;\n    }\n  }\n\n  protected toggleTag(tagToToggle: NbTagComponent): void {\n    tagToToggle._toggleSelection();\n\n    if (tagToToggle.selected && !this.multiple) {\n      this.tags.forEach((tag: NbTagComponent) => {\n        if (tag !== tagToToggle) {\n          tag.selected = false;\n        }\n      });\n    }\n  }\n\n  protected focusInput(): void {\n    if (this._hasInput) {\n      this.tagInput._hostElement.nativeElement.focus();\n    }\n  }\n\n  protected focusInputIfActive(): void {\n    if (this._isFocused) {\n      this.focusInput();\n    }\n  }\n}\n"]}