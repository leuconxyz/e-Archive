{"version":3,"file":"chat-message-file.component.js","sourceRoot":"","sources":["../../../../../../.ng_build/theme/components/chat/chat-message-file.component.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAAE,uBAAuB,EAAE,iBAAiB,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AAC7F,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAYzD;;GAEG;AA0BH,MAAM,OAAO,0BAA0B;IA6CrC,YAAsB,EAAqB,EAAY,YAA0B;QAA3D,OAAE,GAAF,EAAE,CAAmB;QAAY,iBAAY,GAAZ,YAAY,CAAc;QAvBjF;;;WAGG;QACM,eAAU,GAAW,WAAW,CAAC;IAoB1C,CAAC;IAlBD;;;OAGG;IACH,IACI,KAAK,CAAC,KAA0B;QAClC,IAAI,CAAC,UAAU,GAAG,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAS,EAAE,EAAE;YAChD,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACnC,uCACK,IAAI,KACP,QAAQ,EAAE,OAAO,IAAI,IAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,OAAO,IAAI,CAAC,GAAG,GAAG,CAAC,EACnF,OAAO,EAAE,OAAO,IAChB;QACJ,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;IAC1B,CAAC;IAMD,OAAO,CAAC,IAAuB;QAC7B,MAAM,IAAI,GAAI,IAAsC,CAAC,IAAI,CAAC;QAC1D,IAAI,IAAI,EAAE;YACR,OAAO,CAAE,WAAW,EAAE,YAAY,EAAE,WAAW,CAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAClE;QACD,OAAO,KAAK,CAAC;IACf,CAAC;;;YAhFF,SAAS,SAAC;gBACT,QAAQ,EAAE,sBAAsB;gBAChC,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;GAoBT;gBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;;YAxCiC,iBAAiB;YAC1C,YAAY;;;sBAgDlB,KAAK;qBAML,KAAK;mBAML,KAAK;yBAML,KAAK;oBAML,KAAK","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nexport interface NbChatMessageFileIconPreview {\n  url: string;\n  icon: string;\n}\nexport interface NbChatMessageFileImagePreview {\n  url: string;\n  type: string;\n}\nexport type NbChatMessageFile = NbChatMessageFileIconPreview | NbChatMessageFileImagePreview;\n\n/**\n * Chat message component.\n */\n@Component({\n  selector: 'nb-chat-message-file',\n  template: `\n    <nb-chat-message-text [sender]=\"sender\" [date]=\"date\" [dateFormat]=\"dateFormat\" [message]=\"message\">\n      {{ message }}\n    </nb-chat-message-text>\n\n    <ng-container *ngIf=\"readyFiles?.length > 1\">\n      <div class=\"message-content-group\">\n        <a *ngFor=\"let file of readyFiles\" [href]=\"file.url\" target=\"_blank\">\n          <nb-icon [icon]=\"file.icon\" *ngIf=\"!file.urlStyle && file.icon\"></nb-icon>\n          <div *ngIf=\"file.urlStyle\" [style.background-image]=\"file.urlStyle\"></div>\n        </a>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"readyFiles?.length === 1\">\n      <a [href]=\"readyFiles[0].url\" target=\"_blank\">\n        <nb-icon [icon]=\"readyFiles[0].icon\" *ngIf=\"!readyFiles[0].urlStyle && readyFiles[0].icon\"></nb-icon>\n        <div *ngIf=\"readyFiles[0].urlStyle\" [style.background-image]=\"readyFiles[0].urlStyle\"></div>\n      </a>\n    </ng-container>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NbChatMessageFileComponent {\n\n  readyFiles: any[];\n\n  /**\n   * Message sender\n   * @type {string}\n   */\n  @Input() message: string;\n\n  /**\n   * Message sender\n   * @type {string}\n   */\n  @Input() sender: string;\n\n  /**\n   * Message send date\n   * @type {Date}\n   */\n  @Input() date: Date;\n\n  /**\n   * Message send date format, default 'shortTime'\n   * @type {string}\n   */\n  @Input() dateFormat: string = 'shortTime';\n\n  /**\n   * Message file path\n   * @type {Date}\n   */\n  @Input()\n  set files(files: NbChatMessageFile[]) {\n    this.readyFiles = (files || []).map((file: any) => {\n      const isImage = this.isImage(file);\n      return {\n        ...file,\n        urlStyle: isImage && this.domSanitizer.bypassSecurityTrustStyle(`url(${file.url})`),\n        isImage: isImage,\n      };\n    });\n    this.cd.detectChanges();\n  }\n\n  constructor(protected cd: ChangeDetectorRef, protected domSanitizer: DomSanitizer) {\n  }\n\n\n  isImage(file: NbChatMessageFile): boolean {\n    const type = (file as NbChatMessageFileImagePreview).type;\n    if (type) {\n      return [ 'image/png', 'image/jpeg', 'image/gif' ].includes(type);\n    }\n    return false;\n  }\n}\n"]}