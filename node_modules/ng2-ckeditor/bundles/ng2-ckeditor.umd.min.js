!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ng2-ckeditor",["exports","@angular/core","@angular/common","@angular/forms"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ng2-ckeditor"]={},t.ng.core,t.ng.common,t.ng.forms)}(this,(function(t,e,n,o){"use strict";var i=function(){function t(){this.click=new e.EventEmitter}return t.prototype.initialize=function(t){var e=this;t.instance.addCommand(this.command,{exec:function(t){e.click.emit(t)}}),t.instance.ui.addButton(this.name,{label:this.label,command:this.command,toolbar:this.toolbar,icon:this.icon})},t.prototype.ngOnInit=function(){if(!this.name)throw new Error('Attribute "name" is required on <ckbutton>');if(!this.command)throw new Error('Attribute "command" is required on <ckbutton>')},t}();i.decorators=[{type:e.Directive,args:[{selector:"ckbutton"}]}],i.propDecorators={click:[{type:e.Output}],label:[{type:e.Input}],command:[{type:e.Input}],toolbar:[{type:e.Input}],name:[{type:e.Input}],icon:[{type:e.Input}]};var r=function(){function t(){}return t.prototype.ngAfterContentInit=function(){var t=this;this.toolbarButtons.forEach((function(e){return e.toolbar=t.name}))},t.prototype.initialize=function(t){t.instance.ui.addToolbarGroup(this.name,this.previous,this.subgroupOf),this.toolbarButtons.forEach((function(e){e.initialize(t)}))},t}();r.decorators=[{type:e.Directive,args:[{selector:"ckgroup"}]}],r.propDecorators={name:[{type:e.Input}],previous:[{type:e.Input}],subgroupOf:[{type:e.Input}],toolbarButtons:[{type:e.ContentChildren,args:[i]}]};var s=function(){function t(t){this.zone=t,this.change=new e.EventEmitter,this.editorChange=new e.EventEmitter,this.ready=new e.EventEmitter,this.blur=new e.EventEmitter,this.focus=new e.EventEmitter,this.contentDom=new e.EventEmitter,this.fileUploadRequest=new e.EventEmitter,this.fileUploadResponse=new e.EventEmitter,this.paste=new e.EventEmitter,this.drop=new e.EventEmitter,this._value=""}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){t!==this._value&&(this._value=t,this.onChange(t))},enumerable:!1,configurable:!0}),t.prototype.ngOnChanges=function(t){t.readonly&&this.instance&&this.instance.setReadOnly(t.readonly.currentValue)},t.prototype.ngOnDestroy=function(){this.instance&&(this.instance.removeAllListeners(),CKEDITOR.instances[this.instance.name].destroy(),this.instance.destroy(),this.instance=null)},t.prototype.ngAfterViewInit=function(){this.ckeditorInit(this.config||{})},t.prototype.ngAfterViewChecked=function(){this.ckeditorInit(this.config||{})},t.prototype.updateValue=function(t){var e=this;this.zone.run((function(){e.value=t,e.onChange(t),e.onTouched(),e.change.emit(t)}))},t.prototype.ckeditorInit=function(t){var e=this;if("undefined"==typeof CKEDITOR)console.warn("CKEditor 4.x is missing (http://ckeditor.com/)");else{if(this.instance||!this.documentContains(this.host.nativeElement))return;this.readonly&&(t.readOnly=this.readonly),this.instance=CKEDITOR.replace(this.host.nativeElement,t),this.instance.setData(this.value),this.instance.on("instanceReady",(function(t){e.instance.getData()!==e.value&&e.instance.setData(e.value),e.ready.emit(t)})),this.instance.on("change",(function(t){e.onTouched();var n=e.instance.getData();e.value!==n&&(e.debounce?(e.debounceTimeout&&clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout((function(){e.updateValue(n),e.debounceTimeout=null}),parseInt(e.debounce))):e.updateValue(n)),e.editorChange.emit(t)})),this.instance.on("blur",(function(t){e.blur.emit(t)})),this.instance.on("focus",(function(t){e.focus.emit(t)})),this.instance.on("contentDom",(function(t){e.contentDom.emit(t)})),this.instance.on("fileUploadRequest",(function(t){e.fileUploadRequest.emit(t)})),this.instance.on("fileUploadResponse",(function(t){e.fileUploadResponse.emit(t)})),this.instance.on("paste",(function(t){e.paste.emit(t)})),this.instance.on("drop",(function(t){e.drop.emit(t)})),this.toolbarGroups.forEach((function(t){t.initialize(e)})),this.toolbarButtons.forEach((function(t){t.initialize(e)}))}},t.prototype.writeValue=function(t){this._value=t,this.instance&&this.instance.setData(t)},t.prototype.onChange=function(t){},t.prototype.onTouched=function(){},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.documentContains=function(t){return document.contains?document.contains(t):document.body.contains(t)},t}();s.decorators=[{type:e.Component,args:[{selector:"ckeditor",providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return s})),multi:!0}],template:"<textarea #host></textarea>"}]}],s.ctorParameters=function(){return[{type:e.NgZone}]},s.propDecorators={config:[{type:e.Input}],readonly:[{type:e.Input}],debounce:[{type:e.Input}],change:[{type:e.Output}],editorChange:[{type:e.Output}],ready:[{type:e.Output}],blur:[{type:e.Output}],focus:[{type:e.Output}],contentDom:[{type:e.Output}],fileUploadRequest:[{type:e.Output}],fileUploadResponse:[{type:e.Output}],paste:[{type:e.Output}],drop:[{type:e.Output}],host:[{type:e.ViewChild,args:["host",{static:!1}]}],toolbarButtons:[{type:e.ContentChildren,args:[i]}],toolbarGroups:[{type:e.ContentChildren,args:[r]}],value:[{type:e.Input}]};var a=function(){};a.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],declarations:[s,i,r],exports:[s,i,r]}]}],t.CKEditorModule=a,t.ɵa=s,t.ɵb=i,t.ɵc=r,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng2-ckeditor.umd.min.js.map